# 规则文件文档说明

## 规则文件格式

```
{
    "type": "hardware type, available: machine/network",
    "name": "unique hardware name, such as: rtl8822ce",
    "product": {
        "name": "hardware full name",
        "model": "",
        "dmi_family": "",
        "dmi_name": "",
        "dmi_version": "",
        "device_id": "got by lspci/lsusb",
        "vendor_id": "got by lspci/lsusb",
        "firmware_version": "",
        "driver": "",
        "slot_type": "slot type, available: pci/usb"
    },
   "cpu": {
        "name": "Intel(R) Core(TM) i7-10700 CPU @ 2.90GHz", 
        "strict": true
    },
    "kernel": {
        "min": {
            "version": "4.19.90",
            "buildid": 0,
        },
        "max": {
            "version": "5.4.37",
            "buildid": 0
        }
    },
    "solution": "solution name, same with above name, such as: rtl8822ce"
}
```

### 字段介绍

*** type

设备的类型，如整机、网络设备等，目前可用值为：

\- =machine:= 整机

\- =bluetooth:= 蓝牙

\- =camera:= 摄像头

\- =network:= 网卡

\- =graphic:= 显卡

\- =sound:= 声音

\- =peripherals:= 外设

\- =battery:= 电源

***必填\***

*** name

此配置的唯一名称，需与设备相关，一般为设备型号， ***必填\***

（用户不需要自填，前端将会根据`type`结合所填信息自动生成）

*** product

设备的详细信息，各字段含义

\- =name:= 设备全名

\- =model:= 设备型号

\- =dmi_family:= =DMI= 中的 =product family=

\- =dmi_name:= =DMI= 中的 =product name=

\- =dmi_version:= =DMI= 中的 =product version=

\- =vendor_id:= 设备 =id= ，即 =vendor= ，可通过 =lspci -nn= 或 =lsusb= 查看

\- =product_id:= 设备 =id= ，可通过 =lspci -nn= 或 =lsusb= 查看

\- =firmware_version:= 固件版本

\- =driver:= 设备驱动

\- =slot_type:= 插槽类型，如 =pci= 或 =usb=

根据设备的不同，必填项不同，分别如下：

**** machine

\- =name=

\- =dmi_family=

\- =dmi_name=

\- =dmi_version=

**** 除了machine其他的

\- =name=

\- =model=

\- =device_id=

\- =product_id=

\- =firmware_version=

\- =driver=

\- =slot_type=

*** cpu

\- =name:= cpu系列/完整名

\- =strict:= 是否严格匹匹配`name`字段

如果`strict`字段为`true`，那么必须严格匹配`name`字段

如果`strict`字段为`false`，那么如果`name`字段可以为空，也可以为cpu系列

***必填\***

*** kernel

内核信息，需要在那些内核范围内适配， ***非必填\***

\- =min:= 最小的内核版本

\- =max:= 最小的内核版本

\- =version:= 内核版本

\- =buildid:= 编译的版本号，如 =Linux Yun 5.7.7-amd64-desktop #72 SMP= 中就是 =72=

*** solution

解决方案名称，名称应该是唯一的， ***必填\***

（此项由管理员对此硬件设备有了解决方案再做添加）